<!DOCTYPE html>
<html>
	<head><title>Todo List Example</title></head>
	<body>
		<!-- RxJS and FreeGroup -->
		<script src="https://unpkg.com/rxjs@^7/dist/bundles/rxjs.umd.min.js"></script>
		<script src="FreeGroup.js"></script>

		<input id="todo-input">
		<button id="add">Add!</button>
		<ul>
			<template layout-of="todos">
				<y-repeat>
					<li>{todo}</li>
				</y-repeat>
			</template>
		</ul>

		<script class="fg-flow">
		const { withLatestFrom, map, scan } = rxjs;
		const [todo_input, add] = ["todo-input", "add"].map(document.getElementById);
		const new_todos = fromEvent(todo_input, 'oninput');
		const todos = fromEvent(add, 'onclick').pipe(
			withLatestFrom(new_todos),
			map(
				([, input]) => { todo: input.value }
			),
			scan(([a, b]) => ([...a, b]))
		);
		</script>
	</body>
</html>

