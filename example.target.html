<!DOCTYPE html>
<html>
	<head><title>Todo List Example</title></head>
	<body>
		<input id="__FGELEM-0">
		<button id="__FGELEM-1">Add!</button>
		<ul>
			<template id="__FGTEMPLATE-0">
			</template>
		</ul>

		<script id="__FGSCRIPT-fg-sources" class="fg-GENERATED">
		function obs(__fggen_obsname) {
			switch (__fggen_obsname) {
				case "new-todo":
					__fggen_elem = document.getElementById("__FGELEM-0");
					__fggen_obj = FgObservable.from(() => __fggen_elem.value);
					__fggen_old_oninput = __fggen_elem.oninput || (() => {});
					__fggen_elem.oninput = () => {
						__fggen_old_oninput();
						__fggen_obj.__control.fire();
					};
					return __fggen_obj;
				case "add-todo":
					__fggen_elem = document.getElementById("__FGELEM-1");
					__fggen_obj = FgImpulse.impulse();
					__fggen_old_onclick = __fggen_elem.onclick || (() => {});
					__fggen_elem.onclick = () => {
						__fggen_old_onclick();
						__fggen_obj.__control.fire();
					};
					return __fggen_obj;
			}
		}
		</script>

		<script class="fg-flow">
		const new_todos = obs("new-todo").sample(obs("add-todo"));
		const todos = new_todos.giveName("todo").history();
		</script>

		<script id="__FGSCRIPT-view-todos" class="fg-GENERATED">
		todos.alsoSample(now()).subscribe(__fggen_value => {
			__fggen_dom = document.getElementById("__FGTEMPLATE-0");
			__fggen_dom.innerHTML = __fgspec_repeat(__fggen_value, __fggen_value => (
				__fgspec_template(__fggen_value, "<li>{todo}</li>")
			));
		});
		</script>
	</body>
</html>

